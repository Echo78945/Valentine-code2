<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Valentine</title>
<style>
:root{
    --bg1:#ffe6f0;
    --bg2:#fff5f9;
    --card-a:#ff6b9e;
    --card-b:#ffb5d0;
}

html,body{height:100%;}

body{
    margin:0;
    font-family: system-ui, sans-serif;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    overflow: hidden;
}

.card{
    width:min(420px,72vw);
    aspect-ratio:1/1; /* keep the original square size */
    background:linear-gradient(135deg,var(--card-a),var(--card-b));
    border-radius:18px;
    box-shadow:0 10px 30px rgba(0,0,0,0.12);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    gap:18px;
    padding:28px;
    color:white;
    text-align:center;
    position: relative;
    transition: all 0.8s ease;
}

.gif{
    width:160px;
    height:auto;
    display:none; /* üëà hide GIF by default */
}

.message{
    font-size:clamp(20px,4vw,34px);
    font-weight:600;
    margin-bottom:10px;
}

.no-background{
    position: relative;
    width: 100%;
    height: 150px;
    background: transparent;
}

.btn{
    padding:20px 65px;
    border-radius:10px;
    border:none;
    font-weight:700;
    cursor:pointer;
    position:absolute;
}

.btn-yes{
    background:#ff3b78;
    color:white;
}

.btn-no{
    background:#f1f1f1;
    color:#333;
}
</style>
</head>

<body>
<div class="card">

    <img id="gif" class="gif" src="gif1.gif" alt="gif">

    <div class="message">
        Will you be my Valentine? ‚ù§Ô∏è
    </div>

    <div class="no-background" id="noBackground"></div>

    <button id="yesBtn" class="btn btn-yes">Yes</button>
    <button id="noBtn" class="btn btn-no">No</button>
</div>

<script>
const card = document.querySelector('.card');
const message = document.querySelector('.message');
const gif = document.getElementById('gif');
const yes = document.getElementById('yesBtn');
const no = document.getElementById('noBtn');
const noBackground = document.getElementById('noBackground');

let noClicks = 0;

const noSteps = [
    { text: "You said No! üò¢", gif: "gif1.gif" },
    { text: "Do you even like me? ü§î", gif: "gif2.gif" },
    { text: "Welp‚Ä¶ you got no choice now üòÖ", gif: "gif3.gif" }
];

function placeNoRandom() {
    const box = noBackground.getBoundingClientRect();
    const btn = no.getBoundingClientRect();
    const padding = 10;
    const maxX = box.width - btn.width - padding;
    const maxY = box.height - btn.height - padding;
    const x = Math.random() * maxX;
    const y = Math.random() * maxY;
    no.style.left = (x + noBackground.offsetLeft) + 'px';
    no.style.top = (y + noBackground.offsetTop) + 'px';
}

window.addEventListener('load', ()=>{
    yes.style.left = '40px';
    yes.style.top = 'calc(100% - 90px)';
    no.style.left = '270px';
    no.style.top = 'calc(100% - 90px)';
});

no.addEventListener('click', (e)=>{
    e.preventDefault();
    if (noClicks < noSteps.length) {
        gif.style.display = "block"; // üëà show GIF only for No clicks
        gif.src = noSteps[noClicks].gif;
        message.textContent = noSteps[noClicks].text;
        placeNoRandom();
        noClicks++;
    }
    if (noClicks === noSteps.length) {
        no.style.display = 'none';
    }
});

yes.addEventListener('click', ()=>{

    // Hide buttons inside the card
    yes.style.display = "none";
    no.style.display = "none";

    // Immediately hide any No-step GIF/message
    gif.style.display = "none";
    message.style.display = "none";

    // Spawn hearts outside the card
    for (let i = 0; i < 20; i++) {
        const heart = document.createElement('div');
        heart.textContent = 'üíñ';
        heart.style.position = 'absolute';
        heart.style.fontSize = `${Math.random() * 24 + 16}px`;
        heart.style.left = `${Math.random() * window.innerWidth}px`;
        heart.style.top = `${Math.random() * window.innerHeight}px`;
        heart.style.pointerEvents = 'none';
        heart.style.transition = 'all 2s ease-out';
        document.body.appendChild(heart);

        setTimeout(() => {
            heart.style.top = `${parseFloat(heart.style.top) - 200}px`;
            heart.style.opacity = 0;
        }, 50);

        setTimeout(() => heart.remove(), 2000);
    }

    // Celebration GIF outside card
    const celebrationGif = document.createElement('img');
    celebrationGif.src = 'yay.gif';
    celebrationGif.style.position = 'absolute';
    celebrationGif.style.width = '200px';
    celebrationGif.style.left = '50%';
    celebrationGif.style.top = '30%';
    celebrationGif.style.transform = 'translateX(-50%)';
    document.body.appendChild(celebrationGif);

    // After GIF disappears, show letter inside the card
    setTimeout(() => {
        celebrationGif.remove();
        gif.style.display = 'none'; // ensure original gif hidden
        message.style.display = "block";
        message.innerHTML = `
        Hey [her name],<br><br>
        I just wanted to tell you how special you are to me. Every time I think of you, my heart feels lighter and happier. I‚Äôm really glad you‚Äôre in my life, and I hope we can make many more amazing memories together. üíñ<br><br>
        ‚Äì From me ‚ù§Ô∏è
        `;
        message.style.fontSize = 'clamp(18px,4vw,24px)';
        message.style.fontWeight = '500';
        message.style.color = '#ff3b78';
        message.style.textAlign = 'left';
    }, 3000);
});
</script>
</body>
</html>